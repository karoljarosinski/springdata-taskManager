<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Strona domowa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <style>
        .container { 
          height: 40px;
          position: relative;
        }
        
        .center {
          margin: 0;
          position: absolute;
          top: 50%;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
        </style>
</head>
<body>
<section layout:fragment="content">
    
    <h2>Lista zadań</h2>

    <table class="table table-striped">
        <tr>
            <th>Zadanie</th>
            <th>Status</th>
            <th>Kategoria</th>
            <th>Termin</th>
            <th>Oznacz jako zrobione</th>
            <th>Edytuj</th>
        </tr>
        <tr  th:each="task: ${tasks}">
            <td>
                <p th:text=${task.taskName}></p>
            </td>
            <td>
                <p th:text=${task.status.description}></p>
            </td>
            <td>
                <p th:text=${task.category.description}></p>
            </td>
            <td>
                <p th:text=${task.deadline}></p>
            </td>
            <td>
                <form th:action="|/done/${task.id}|" method="post" th:object=${task}>
                    <button type="submit">Zrobione</button>
                </form>
            </td>
            <td>
                    <form th:action="|/edit/${task.id}|" method="get">
                        <button type="submit">Edytuj</button>
                    </form>
            </td>
        </tr>
        
    </table>
        <form th:action="@{/add}" method="post" th:object=${task}  class="row g-3">
            <div class="col">  
                <label for="taskName">Nazwa taska</label>
                <input type="text" class="form-control" th:field="*{taskName}" id="taskName" placeholder="Nazwa taska">
            </div>
            <div class="col">
                <label for="category">Kategoria</label>
                <select th:field="*{category}" id="category" class="form-select" aria-label="Default select example">
                    <option value="HOMEWORK" selected>zadanie domowe</option>
                    <option value="CLEANING">sprzątanie</option>
                    <option value="SHOPPING">zakupy</option>
                    <option value="OTHER">inne</option>
                </select>
            </div>
            <div class="col">
                <label for="deadline">Termin</label>
                <input type="date" class="form-control" th:field = "*{deadline}" id="deadline">
            </div>
        
            <div class="container">
                <div class="center">
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </div>  
        </form>
</section>
</body>
</html>